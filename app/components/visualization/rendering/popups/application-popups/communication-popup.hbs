<h3 class='popover-header'>
  <div class='text-center text-break font-weight-bold pl-1'>
    Communication Information
  </div>
</h3>
<div class='popover-body'>
  <table class='w-100'>
    <tbody>
      {{! Aggregated Information }}
      {{#if (gt @communication.drawableClassCommus.length 1)}}
        {{! Aggregated request count }}
        <tr>
          <td class='text-nowrap align-top'>{{svg-jar
              'code-16'
              class='octicon align-middle mr-1'
            }}</td>
          <td class='text-right text-break pl-1'>
            {{this.calculateAggregatedRequestCount}}
            ( 100% )
          </td>
        </tr>
        {{! # of unique method calls }}
        <tr>
          <td class='text-nowrap align-top'>#</td>
          <td class='text-right text-break pl-1'>
            {{@communication.drawableClassCommus.length}}
          </td>
        </tr>
        <hr />
      {{/if}}
      {{#each @communication.drawableClassCommus as |drawableClassCommu index|}}
        {{! Relationship }}
        <tr>
          <td class='text-nowrap align-top'>{{svg-jar
              'arrow-switch-16'
              class='octicon align-middle mr-1'
            }}</td>
          <td class='text-right text-break pl-1'>
            {{#if (eq drawableClassCommu.sourceApp.id this.application.id)}}
              <button
                type='button'
                class='buttonToLink'
                {{on
                  'click'
                  (fn
                    this.highlightEntity
                    drawableClassCommu.sourceClass
                    drawableClassCommu.sourceApp.id
                  )
                }}
              >
                {{drawableClassCommu.sourceClass.name}}
                <BsTooltip @placement='top' @triggerEvents='hover'>
                  Application:
                  {{drawableClassCommu.sourceApp.name}}
                </BsTooltip>
              </button>
            {{else}}
              {{drawableClassCommu.sourceClass.name}}
              <BsTooltip @placement='top' @triggerEvents='hover'>
                Application:
                {{drawableClassCommu.sourceApp.name}}
              </BsTooltip>
            {{/if}}
            {{#unless (eq drawableClassCommu.sourceApp.id this.application.id)}}
              (<button
                type='button'
                class='buttonToLink'
                {{on
                  'click'
                  (fn @showApplication drawableClassCommu.sourceApp.id)
                }}
              >
                {{drawableClassCommu.sourceApp.name}}
              </button>)
            {{/unless}}
            {{svg-jar 'arrow-right-16' class='octicon align-middle'}}
            {{#if (eq drawableClassCommu.targetApp.id this.application.id)}}
              <button
                type='button'
                class='buttonToLink'
                {{on
                  'click'
                  (fn
                    this.highlightEntity
                    drawableClassCommu.targetClass
                    drawableClassCommu.targetApp.id
                  )
                }}
              >
                {{drawableClassCommu.targetClass.name}}
                <BsTooltip @placement='top' @triggerEvents='hover'>
                  Application:
                  {{drawableClassCommu.targetApp.name}}
                </BsTooltip>
              </button>
            {{else}}
              <button
                type='button'
                class='buttonToLink'
                {{on
                  'click'
                  (fn
                    this.highlightEntity
                    drawableClassCommu.targetClass
                    drawableClassCommu.targetApp.id
                  )
                }}
              >
                {{drawableClassCommu.targetClass.name}}
                <BsTooltip @placement='top' @triggerEvents='hover'>
                  Application:
                  {{drawableClassCommu.targetApp.name}}
                </BsTooltip>
              </button>
            {{/if}}
          </td>
        </tr>
        {{! Name }}
        <tr>
          <Visualization::Rendering::Popups::Interactable-Properties::EditOperationName
            @communication={{drawableClassCommu}}
          />
        </tr>
        {{! Requests }}
        <tr>
          <td class='text-nowrap align-top'>{{svg-jar
              'code-16'
              class='octicon align-middle mr-1'
            }}</td>
          <td class='text-right text-break pl-1'>
            {{drawableClassCommu.totalRequests}}
            (
            {{round
              (mult
                (div
                  drawableClassCommu.totalRequests
                  this.calculateAggregatedRequestCount
                )
                100
              )
            }}% )
          </td>
        </tr>
        {{#if this.landscapeRestructure.restructureMode}}  
          <Visualization::Rendering::Popups::Interactable-Properties::EditCommMesh
            @drawableClassComm={{drawableClassCommu}}
          />
        {{/if}}
        {{#if (lt index (sub @communication.drawableClassCommus.length 1))}}
          <hr />
        {{/if}}
      {{/each}}
    </tbody>
  </table>
</div>